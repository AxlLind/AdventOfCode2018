import aoc
from collections import Counter
from itertools import combinations

INPUT = "wlpiogsvdfecjdqmnxakudrhbz\nwbpioesvyfecjuqmlxaktdrhbz\nblviogavyfecjuqmnxaktdrhbz\nwlpiogsvydecjuqmnipktdrhbz\nwlwiogsvyfmcjuqmoxaktdrhbz\nwlpiogsvphecjuqmnxaktdrzbz\nwlpiogsvyfecjuqmnkakhdrkbz\nwlpiogsvyfhcjuqmnxxktddhbz\nwlpiogsvyfccfuqmnxgktdrhbz\nwlpiogsvhmecjvqmnxaktdrhbz\nwlpiogsvyfecjdqqnxaktdrhyz\nwlpiogyvycecjaqmnxaktdrhbz\nwlpiogsvyfecjfqmnxaktybhbz\nwkpiogsvyfmcauqmnxaktdrhbz\nwlmiolsvyfecjuqmnxaktdrhbn\nwlpioksvyfecjuqmnxaktdrhgs\nwlpiogsvyflcjuvmnxsktdrhbz\nwgziogsvyfecjuqmnxaktdrhoz\nwhpingsvyeecjuqmnxaktdrhbz\nwlpiogsvyfecjuqgnxaktdvhlz\nwlpioasvtfecjuqmnxaktdahbz\nwlpihgsvefeceuqmnxaktdrhbz\nwlpiogsvyfecyuqwnxaktdghbz\nwlpfsgsvyfhcjuqmnxaktdrhbz\nwlpiogyvyfecjuqmnxalpdrhbz\nwlpiogsvyfescsqmnxaktdrhbz\nwluiogsvyfecytqmnxaktdrhbz\nwltiorsvyfecjuqmoxaktdrhbz\nwlmiogwvyfejjuqmnxaktdrhbz\nwlpiogsvyfycjuumnxvktdrhbz\nwlkiogsqyfecjqqmnxaktdrhbz\nwlpiogsvyfecouqmnxaktfrubz\nhupiogsvlfecjuqmnxaktdrhbz\nwlpiogsvpxecjuqmnxaksdrhbz\nwlpiogsvyfkcjfqmnxxktdrhbz\nwlpiogsjyfecjuqnnxakthrhbz\nwlpiogsvyfecjuqmnxaktddhdk\nwlpipgsvyfecjuqmnhaktdrubz\nwlpiogsoyfenjpqmnxaktdrhbz\nwlpiogsvyfecnuqmnxaxtdrmbz\nwlpiggsvyfjcjuumnxaktdrhbz\nwlppogsvyfecjuqmnxautdhhbz\nwlpiovbvyfecjuqmnxaktcrhbz\nwlpiogsvyfecjoqmnxaktdrobu\nwlpiohsvyfecjugmnxakthrhbz\nwvpiogovyfecjuqmnxakwdrhbz\nwlpiogsbyfecjuqmnxdktdrtbz\nwlpnogsvyfecjuqmnxakykrhbz\nwlpiogpvyfecjuqmnxvktdrhbs\nwlpiogsvkvecjuqmnxadtdrhbz\nwlkihgsvyfecjuqmnxlktdrhbz\nwlpilgsvyfhcjuqmnxakudrhbz\nwlpioksvysgcjuqmnxaktdrhbz\nwlpiogsvyfecorqmoxaktdrhbz\nwlpiogsvyfectzlmnxaktdrhbz\nwlpiogsvywecjuqwnqaktdrhbz\nwlpiowsvyfecjuqrnxaftdrhbz\nwlpiogsuyfecjutmnxaktnrhbz\nwepiowsvyfqcjuqmnxaktdrhbz\nwlpirgssyfecjuqmvxaktdrhbz\nwlyiogstyfecjuqmnxaktdrhbw\nwlpiogseyfecauqmnxaktdjhbz\nwlpioisvyfenjuqmnxakrdrhbz\nwlpiogsvyfrgjfqmnxaktdrhbz\nwlpionsvyfecjmqmjxaktdrhbz\nalpiggsvyfecjuqmnxaktdrhkz\nwlphngsvyfecjuqmnxfktdrhbz\nwlpiogsvyferjuqmlxakttrhbz\nwlniogsvefecjuqsnxaktdrhbz\nwlpiogsvyfncjurmnxakudrhbz\nwlpiogsvyfecjuqmnxaktprlaz\nwlpiocsvyfecjupmkxaktdrhbz\nwlpihgsvyfecjeqfnxaktdrhbz\nwlwioasvyfjcjuqmnxaktdrhbz\nwlpifgsvyfecjuqsnxaktdshbz\nwlxiogsvyrechuqmnxaktdrhbz\nwlpiogovyfxcjuqmnxakkdrhbz\nwlpiogsvyfecjkqmdxaktmrhbz\nwlpiogsvyfecjwqmntaktdhhbz\nwlpiogsvdfecjuqmmxaktbrhbz\nwlpiogsvyfecauqmnxaksdrhwz\nwlpiogsvwfecjuqznxaktorhbz\nwlpiogtvyfecjuqhnxakidrhbz\nwlpiogsvyyecjuqmnxaktdrhwt\nwljiogsvyfecfuqbnxaktdrhbz\nwlpiogsvybecjuqmnxagtdrjbz\nwrpiogsvyfecjuqmnuaktdrhbd\nwlpiogsvyfecjurmnxnltdrhbz\nblpvogsvyaecjuqmnxaktdrhbz\nbfpiogyvyfecjuqmnxaktdrhbz\nwlpiogsvyfecjuqinxaknddhbz\nwlpizgsvvfecjuqxnxaktdrhbz\nglpiogsvyrecjuqmnxaktdrhbr\nwlpiogskhfecjutmnxaktdrhbz\nwlpiogsvyfecmuqmnxaktdribc\nwlpioesvwfecjuqmnxakkdrhbz\nwlpionsrafecjuqmnxaktdrhbz\nwlsiogsvyfecjuqmnaaktdrhvz\nbloiogsvyfecjuqmnxakjdrhbz\nwlpiogsvyfecjuqenmastdrhbz\nwlpiogyvyfecjuqmuxakldrhbz\nplpiogovyfecjuvmnxaktdrhbz\nwlpiogsvyfebjuqmnkakvdrhbz\nwlziogsvyfhcjuqmngaktdrhbz\nwlsiogsvyfecjuqmnxaktdrzjz\nplbiogsvyfecfuqmnxaktdrhbz\nwfpiogsvyfecjuqknxaktdrhiz\nwlpiogjbyfecjuqmnxaktprhbz\nwmpiogsvyrecjcqmnxaktdrhbz\nwlpiogsyyfecjuqmqxaktdrbbz\nwlpiogsvyfecjuqknxaetdehbz\nwlpiogsvyfezjuqmnxakkdhhbz\nwlpiogsvyfecjjqvnxaktdrhiz\nwkpiogsvyfucjuqmnxaktdrhbd\nlliiogsvyfecjuqmnxaktdrhoz\nwlpiogsvyfecjuqmsxdktdshbz\nwlprogtvyfecjuqmnxaktvrhbz\nwlpizgssyffcjuqmnxaktdrhbz\nwlpioasvyfvcjuqmnxakldrhbz\nwlpoogsvyyecjuqmnxastdrhbz\nwlpiognvyfecjuqmnsaktdrhbr\nwlpiogsoyfecjuqmnxaktdrhho\nwfpiogsvydecjuqmnxaotdrhbz\nwlpiogsvqhecjuqmnxaktdrhhz\nwkpiogsvyfeojuqmnxaktdrqbz\nwlpiogsvyfeveuqmnxaktdshbz\nwlpiogbvyfecjuqmexaktdrcbz\nwlpxogsvyfehjsqmnxaktdrhbz\nwlpcogsvyfecjuqmnjakttrhbz\nwlpiogsvvkecjuqmnxaftdrhbz\nwlpiogsvffecnuqmnxaktdnhbz\nwlpiogsvyfecjupjnxaktdrhbr\nwlpqogsvyfecjuqmnxlktdphbz\nwlpxogsvyfecjvqmnxaktirhbz\nelpiogsvyfecjuqlnxaqtdrhbz\nwspiogsvrfecjuqmnxakadrhbz\nwlpiogsmyfecbuqmnxactdrhbz\nwlpiogsvyfecauqmnyakzdrhbz\nwlsiogsvyfecjuqmnxakvdrnbz\nwlpiogsxyfeijuqmnxakndrhbz\nwlpiogsvyfecjuumnxakbyrhbz\nwlpiogsvyfecjuqmnxhktdyhbo\nwlpiogsvyfecjuqqnxnjtdrhbz\nwapiogsvyfecjuqmnxoktdrmbz\nwlpiogsvyfeejvqmnxaktdrubz\nwlpitgsvyeectuqmnxaktdrhbz\nalpiogsvyfecjulmnxaktdchbz\nwlpiogsvyfecjuqmuxoktdrwbz\nwlpiogsvyfzgjuhmnxaktdrhbz\nwlpnogsvyfecjuqmdxaktyrhbz\nwlpiogsvyfecjuqmnxakthrhra\nwliiogsvyfecluqmnxaktdhhbz\nwlpiogsvyfecjuymnxaltdrhwz\nwlpiogsvyfeljuqmnxaktyrhbd\nwlpiygsvvfecjuqmfxaktdrhbz\nwlpiogihsfecjuqmnxaktdrhbz\nwlpiogjvyfecjuqmnhuktdrhbz\nwldiogsvyfecjiqmwxaktdrhbz\nwlpiogsvjfecjuqmnxaktdrgbr\nwlpioisvyfecjuqwnxabtdrhbz\nwlviogsvyfscjuqmnxqktdrhbz\nwlpiogsvyfecjuqmuxakbdrubz\nwlpiogsvyfecjuqmnxmatdrhqz\nwlpiogsvyfbcjuqwmxaktdrhbz\nwlpiogsvyfexjuqmnxuxtdrhbz\nwljiogsvbfecjuqmnxartdrhbz\nwlpvogsvyfeujuqmnxaktdmhbz\nwnpiogsvyfekjuqanxaktdrhbz\nwlprogsvyfecjuqmzxvktdrhbz\nwkpiogvvyfecjuqmnxaktdrabz\nwlpiogsvwfecjuqmnxaktkbhbz\nwlpiogsvyfecjlqmnxtttdrhbz\nwlpioqsvyfecjuqznxaktyrhbz\nwlpiogsvyfecjuqmnxnethrhbz\nwlpiogsyyfgcjuqmnxaktdrhbm\nwlpiopsvbfecjuqmnxaktdlhbz\nwloqogsvyfucjuqmnxaktdrhbz\nwlpiogsvmfecjuqmnxmktdrhtz\nwlhiogsvyfecjuhmnxaktsrhbz\nwlpioggvpfecjufmnxaktdrhbz\nwlpiogsvyfbcjuomnxaktdrhbh\nwlpmogsvyfecyuqmnxoktdrhbz\nwlpiogslyfecjuqmnxaptyrhbz\ntlpiogsnyfecguqmnxaktdrhbz\nwlpiogsvyfecjuqmnxwktwehbz\nwlpiogsvgfecjuqmnxaktdrabu\nwbpiogsvyfecjuqmnxagtdrhoz\nwlwipgsvyfecjuqmnxaktdrhbu\nwlpwogsvykeczuqmnxaktdrhbz\nwlpgogsvwfecjuqmnxcktdrhbz\nwlpiogsqyfecjuqmrxaktdrrbz\nwlpiogsvyfecjuqmnxakthrafz\nwypicgseyfecjuqmnxaktdrhbz\nwlpiogcvqfecjuqmnxaktdrhzz\nwlriogsvyfecouqmnkaktdrhbz\nwlpiogsvyfemjulmnxaktdrhdz\nflpiogadyfecjuqmnxaktdrhbz\nwupiogsvyfbvjuqmnxaktdrhbz\nwlpiogsvyfebjummnxaktdrrbz\nwjpiogsvyfecjuqmnxaktprybz\nwlpirgsvyfecjiqmnxaatdrhbz\nbvpiogsvyfecjuqmnxaktdrhez\nwlpiogsvyfxcjuqmnxykzdrhbz\nwlkiwgsqyfecjqqmnxaktdrhbz\nwepaogsvyfecjxqmnxaktdrhbz\nwlpiovsvyfecjjqmnxaktdmhbz\nwlpioysryfecjuqmnxaktdrhiz\nwlpizjsvyfecjuvmnxaktdrhbz\ndlpiogsvyfecjucmnxakbdrhbz\nwlpiogsccfecjrqmnxaktdrhbz\nwlpioggvyfecpuqmnxagtdrhbz\nwlpiogsvyfvcjuumlxaktdrhbz\nwwpiogsryfjcjuqmnxaktdrhbz\nwlpiogsvyfecjuqynxaktdrogz\nwlpiogsvyfecjpqmnxskbdrhbz\nwlpiogsvyfecjuhmfxaktvrhbz\nwlpiogevyfecjrqmnwaktdrhbz\nwlpiigsvyfemjuqmnxaktdrhtz\nwlpcogsvyfecjuqhnxakgdrhbz\nwupiogsvyfxcjuqmnxaktdrhgz\nwlsiogsvyfecjuqenxuktdrhbz\nwlpioglvyfecjujmexaktdrhbz\nwlriogsvyfeljuqmnxattdrhbz\nwlpiogsvyfecfuqmhxaktkrhbz\nwlppogsvyfecjuqmxxabtdrhbz\nwlniogsvyfevjuqwnxaktdrhbz\nwlhiogsvyfecjuqmnxactxrhbz\nilpiogivyflcjuqmnxaktdrhbz\nwlpmogsvyfecjuqmnxaktdrlbs\nwipiogsvyfeqjuqmnxaktrrhbz\nwvpiogsvyfecjuqknxaktdrrbz\nwwpioguvyfecxuqmnxaktdrhbz\nwlpiogsvkfdcjuqmnxaktdzhbz\nwlpiogfvyfecjuqmnxadtdrhbg\nwlpiogsvyzefjuqfnxaktdrhbz\nwlpiogstyfechuqmnxaktdchbz\nwlpiogszyfedjuqmnxsktdrhbz\nwzpiozsvyfncjuqmnxaktdrhbz\nxlpiogsvyfefjuqmnmaktdrhbz\nwlpiogsvyfebxummnxaktdrhbz\nwlpiogsgyfecfurmnxaktdrhbz\nwlpqogsvyfecjuomnxaktdrhbi\nwlpiogjvufecjuqmnxaktdrhbd\nwlpiolsvyfecduqmnxaktrrhbz\nwlpxogsvyfecjuqmnxaktgrhbk\nwlpiogsfyfncjuqmnxsktdrhbz\nwlpioggvyfecjufmnxaktdrebz\nwlpiogsvyfecfujmnxaktdrwbz\nrlpiogsvyfecjlqmnxaktdqhbz\nwlpfogsvyfecjuimnxaktfrhbz"

def part1(ids: list[str]) -> int:
  c = Counter(x for l in ids for x in set(Counter(l).values()))
  return c[2]*c[3]

def part2(ids: list[str]) -> str:
  for a,b in combinations(ids,2):
    ans = [c1 for c1,c2 in zip(a,b) if c1 == c2]
    if len(ans)+1 == len(a):
      return ''.join(ans)
  assert False

@aoc.main
def main() -> tuple[int,str]:
  ids = INPUT.split('\n')
  return part1(ids), part2(ids)

if __name__ == "__main__":
  main()
